<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.example.evcs.mail.model.dao.EmailMapper">
  
  
	 <update id="updateEmailVerified">
		UPDATE EMAIL_VERIFICATION
		SET VERIFIED = 'Y'
		WHERE EMAIL = #{email}
	 </update>
  
	<select id="getEmailVerification">
		SELECT email, code, expires_at, verified
		FROM EMAIL_VERIFICATION
		WHERE EMAIL = #{email}
	</select>
	
	<select id="findByEmail">
		SELECT email
		FROM EMAIL_VERIFICATION
		WHERE EMAIL = #{email}
	</select>
	
	
	<insert id="saveCode">
		INSERT INTO EMAIL_VERIFICATION(EMAIL, CODE, EXPIRES_AT, VERIFIED)
		VALUES(#{email}, #{code}, #{expiresAt}, 'N')
	</insert>

	
	
  
  
  
  
  
  
  
  
  
  
  
  
  
  </mapper>